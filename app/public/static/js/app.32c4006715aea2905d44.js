(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{105:function(t,e,r){"use strict";r.r(e);var n=r(2),s={data:function(){return{}},components:{Header:function(){return r.e(0).then(r.bind(null,108))}}},a=(r(47),r(4)),i=Object(a.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Header"),this._v(" "),e("router-view")],1)},[],!1,null,"426e470c",null).exports,o=r(21),u=(r(23),r(35),r(44)),c=r.n(u).a.create({baseURL:"",timeout:5e3});c.interceptors.request.use(function(t){var e=localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),c.interceptors.response.use(function(t){return t.data.token&&(console.log("token:",t.data.token),localStorage.setItem("token",t.data.token)),t},function(t){return 401===t.response.status&&(localStorage.removeItem("token"),b.push("/login")),Promise.reject(t.message)});var l=c,m={data:function(){return{}},methods:{getIndex:function(){var t;l.get("/index/",{params:t}).then(function(t){console.log(t)})}},created:function(){this.getIndex()}},d=(r(88),Object(a.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("mu-container",[e("mu-card",{staticStyle:{width:"100%",margin:"0 auto"},attrs:{raised:!0}},[e("mu-card-header",{attrs:{title:"Myron Avatar","sub-title":"sub title"}},[e("mu-avatar",{attrs:{slot:"avatar"},slot:"avatar"},[e("img",{attrs:{src:""}})])],1),this._v(" "),e("mu-card-title",{attrs:{title:"Content Title","sub-title":"Content Title"}}),this._v(" "),e("mu-card-text"),this._v(" "),e("mu-card-actions",[e("mu-button",{attrs:{flat:""}},[this._v("更多")])],1)],1)],1)},[],!1,null,"02476644",null).exports),p={data:function(){return{visibility:!1,username:"",password:"",usernameErr:"",passwordErr:""}},methods:{goToRegister:function(){this.$router.push("/register")},goLogin:function(){var t=this;this.usernameErr=this.passwordErr="",this.username?this.password?this.$store.dispatch("login",{username:this.username,password:this.password}).then(function(e){e.data.success&&t.$router.push("/")}).catch(function(t){return console.log(t)}):this.passwordErr="please enter a password":this.usernameErr="please enter a username"}},created:function(){}},f=(r(89),Object(a.a)(p,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("mu-container",[r("mu-card",{staticStyle:{width:"100%","max-width":"375px",margin:"0 auto"}},[r("mu-card-title",{attrs:{title:"Login"}}),t._v(" "),r("mu-card-text",[r("mu-text-field",{attrs:{"error-text":t.usernameErr,label:"Username"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),r("br"),t._v(" "),r("mu-text-field",{attrs:{"error-text":t.passwordErr,label:"Password","action-icon":t.visibility?"visibility_off":"visibility","action-click":function(){return t.visibility=!t.visibility},type:t.visibility?"text":"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("br")],1),t._v(" "),r("mu-card-actions",[r("mu-button",{attrs:{color:"primary"},on:{click:t.goLogin}},[t._v("Login")]),t._v(" "),r("p",{staticClass:"register",on:{click:t.goToRegister}},[t._v("Register")])],1)],1)],1)},[],!1,null,"1d7d5eea",null).exports),v={data:function(){return{visibility:!1,username:"",password:"",usernameErr:"",passwordErr:""}},methods:{goToLogin:function(){this.$router.push("/login")},goRegister:function(){var t=this;this.usernameErr=this.passwordErr="",this.username?this.password?this.$store.dispatch("register",{username:this.username,password:this.password}).then(function(e){e.data.success&&t.$router.push("/")}).catch(function(t){return console.log(t)}):this.passwordErr="please enter a password":this.usernameErr="please enter a username"}}},h=(r(90),Object(a.a)(v,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("mu-container",[r("mu-card",{staticStyle:{width:"100%","max-width":"375px",margin:"0 auto"}},[r("mu-card-title",{attrs:{title:"Create an acount"}}),t._v(" "),r("mu-card-text",[r("mu-text-field",{attrs:{"error-text":t.usernameErr,label:"Username"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),r("br"),t._v(" "),r("mu-text-field",{attrs:{"error-text":t.passwordErr,label:"Password","action-icon":t.visibility?"visibility_off":"visibility","action-click":function(){return t.visibility=!t.visibility},type:t.visibility?"text":"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("br")],1),t._v(" "),r("mu-card-actions",[r("mu-button",{attrs:{color:"primary"},on:{click:t.goRegister}},[t._v("Register")]),t._v(" "),r("p",{staticClass:"register",on:{click:t.goToLogin}},[t._v("Login")])],1)],1)],1)},[],!1,null,"1e68ce55",null).exports);n.a.use(o.a);var g,w=[{path:"/",component:d},{path:"/login",component:f},{path:"/register",component:h}],b=new o.a({routes:w}),_=r(45),E=(r(93),r(22));function k(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}n.a.use(E.a);var x=new E.a.Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:(g={},k(g,"AUTH_REQUEST",function(t){t.status="loading"}),k(g,"AUTH_SUCCESS",function(t,e,r){t.status="success",t.token=e,t.user=r}),k(g,"AUTH_ERROR",function(t){t.status="error"}),k(g,"LOGOUT",function(t){t.status="",t.token=""}),g),actions:{login:function(t,e){var r=t.commit;return new Promise(function(t,n){var s;r("AUTH_REQUEST"),(s=e,l.post("/users/login",s)).then(function(e){var n=e.data.token,s=e.data.user;r("AUTH_SUCCESS",n,s),t(e)}).catch(function(t){r("AUTH_ERROR"),localStorage.removeItem("token"),n(t)})})},register:function(t,e){var r=t.commit;return new Promise(function(t,n){var s;r("AUTH_REQUEST"),(s=e,l.post("/users/register",s)).then(function(e){var n=e.data.token,s=e.data.user;r("AUTH_SUCCESS",n,s),t(e)}).catch(function(t){r("AUTH_ERROR",t),localStorage.removeItem("token"),n(t)})})},logout:function(t){var e=t.commit;return new Promise(function(t,r){e("LOGOUT"),localStorage.removeItem("token"),t()})}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}}});r(94),r(95);n.a.use(_.a),new n.a({el:"#app",router:b,store:x,render:function(t){return t(i)}})},13:function(t,e,r){},14:function(t,e,r){},15:function(t,e,r){},16:function(t,e,r){},46:function(t,e,r){r(105),t.exports=r(96)},47:function(t,e,r){"use strict";var n=r(13);r.n(n).a},88:function(t,e,r){"use strict";var n=r(14);r.n(n).a},89:function(t,e,r){"use strict";var n=r(15);r.n(n).a},90:function(t,e,r){"use strict";var n=r(16);r.n(n).a}},[[46,2,3,4]]]);